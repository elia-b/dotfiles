#!/usr/bin/env bash

current_date=$(date +%d%b%Y)

# Define the filename with the current date and ".md" extension
filename="$HOME/SecondBrain/dailies/${current_date}.md"

# Check if the file exists
if [ -f "$filename" ]; then
    nvim "$filename"
else
    counter=1
    previous_date=$(date -d "-${counter} day" +%d%b%Y)
    previous_filename="$HOME/SecondBrain/dailies/${previous_date}.md"
    while [ ! -f "$previous_filename" ]
    do
        ((counter++))
        previous_date=$(date -d "-${counter} day" +%d%b%Y)
        previous_filename="$HOME/SecondBrain/dailies/${previous_date}.md"
    done
    cp "$previous_filename" "$filename"
    nvim "$filename"
fi
